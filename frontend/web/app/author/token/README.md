# 作者代币功能详细说明

## 功能概述

作者代币功能是Novel Forge平台的创新功能，允许符合条件的作者在BNB链上发行个人代币，建立专属粉丝经济。通过代币，作者可以与粉丝建立更紧密的联系，粉丝可以通过持有代币获得特殊权益，同时有机会从作者成功中获益。

## 核心功能

### 1. 代币发行资格检查

作者需要满足以下条件之一才能发行个人代币：
- 累计创作字数达到500,000字
- 累计获得点赞1,000个
- 累计粉丝数500人
- 被平台认证为特邀作者

### 2. 代币创建流程

符合条件的作者可以创建个人代币，需要设置：
- 代币名称：作者个人代币的全称
- 代币符号：交易时显示的简称（最多5个字符）
- 承诺收入比例：作者承诺将创作收入的一定比例（5%-30%）用于回购代币

### 3. 代币分配方案

新创建的代币总量为1,000,000枚，初始分配如下：
- 作者持有：40%（400,000枚）
- 平台流动性池：30%（300,000枚）
- 读者激励池和平台储备：30%（300,000枚）

### 4. 代币权益系统

持有作者代币的读者可以获得以下权益：
- 优先阅读权：提前阅读最新章节（需持有100枚代币）
- 专属评论区：在专属区域与作者交流（需持有500枚代币）
- 投票权：参与作者创作方向的决策（需持有1,000枚代币）
- 定制章节：请求作者创作特定内容（需持有5,000枚代币）

## 技术实现

### 智能合约

#### TokenFactory.sol

负责创建和管理作者代币的工厂合约，主要功能：
- 检查作者发币资格
- 创建新的作者代币
- 维护作者与代币的映射关系
- 管理代币符号唯一性
- 提供代币列表查询接口

关键函数：
```solidity
// 检查作者是否有资格发币
function checkEligibility(address author) public view returns (bool)

// 创建作者代币
function createAuthorToken(
    string memory name,
    string memory symbol,
    address author,
    uint256 commitedRevenue
) external nonReentrant returns (address)

// 获取作者代币地址
function getAuthorToken(address author) external view returns (address)
```

#### AuthorToken.sol

作者个人代币的标准实现，继承自ERC20，主要功能：
- 代币基本信息和初始分配
- 收入承诺和回购机制
- 权益阈值和功能管理
- 读者激励分配

关键函数：
```solidity
// 作者提交收入用于回购
function commitRevenue() external payable

// 执行代币回购
function executeBuyback(uint256 bnbAmount, uint256 tokenAmount) external onlyOwner

// 检查用户是否有特定权益
function checkUserPrivilege(address user, string memory privilegeType) 
    external view returns (bool)

// 作者切换功能开关
function toggleFeature(string memory featureType, bool enabled) external onlyOwner
```

### 前端实现

#### 作者代币页面 (frontend/web/app/author/token/page.tsx)

页面分为三个主要部分：
1. 发币资格检查：显示作者当前数据与发币要求的对比
2. 代币创建表单：填写代币名称、符号和承诺收入比例
3. 代币管理界面：已发币作者可查看代币数据和管理功能

关键组件：
- 资格检查卡片：显示字数、点赞、粉丝数与要求的对比
- 代币创建表单：收集代币创建所需信息
- 确认发行界面：显示代币分配方案和最终确认
- 代币管理界面：显示代币数据、功能开关和持有者列表

#### 代币市场页面 (frontend/web/app/market/tokens/page.tsx)

提供作者代币的交易市场，主要功能：
- 代币列表展示：所有作者代币的信息和数据
- 排序和筛选：按价格、交易量、市值等排序
- 搜索功能：搜索特定作者或代币
- 交易功能：购买和出售代币

### API接口

#### GET /api/token

检查作者发币资格和获取代币信息

请求参数：
- address: 作者钱包地址

响应数据：
- eligible: 是否有资格发币
- hasToken: 是否已有代币
- tokenAddress: 代币合约地址（如已有）
- tokenName: 代币名称（如已有）
- tokenSymbol: 代币符号（如已有）
- totalSupply: 代币总供应量（如已有）
- stats: 作者统计数据（如未发币）
- requirements: 发币要求（如未发币）

#### POST /api/token

创建作者代币

请求参数：
- address: 作者钱包地址
- tokenName: 代币名称
- tokenSymbol: 代币符号
- commitedRevenue: 承诺收入比例

响应数据：
- success: 是否创建成功
- tokenAddress: 新创建的代币地址
- transactionHash: 交易哈希

## 使用流程

### 作者发币流程

1. 作者访问"作者代币"页面
2. 系统自动检查作者是否满足发币条件
3. 符合条件的作者填写代币信息表单
   - 设置代币名称
   - 设置代币符号（最多5个字符）
   - 设置承诺收入比例（5%-30%）
4. 作者确认发币信息
5. 系统调用智能合约创建代币
6. 代币创建成功后，作者可以管理代币功能和查看持有者信息

### 代币管理流程

1. 作者访问"作者代币"页面
2. 查看代币数据：总供应量、当前价格、持有人数、市值
3. 管理代币功能：开启或关闭各项权益功能
4. 执行收入承诺：将部分创作收入用于回购代币
5. 查看代币持有者列表

### 读者使用流程

1. 读者访问"代币市场"页面
2. 浏览或搜索感兴趣的作者代币
3. 购买作者代币
4. 持有足够代币后，可以享受相应的权益：
   - 优先阅读新章节
   - 在专属评论区与作者交流
   - 参与创作方向投票
   - 请求定制章节内容

## 经济模型

### 代币价值来源

1. **实用价值**：持有代币可获得特殊权益
2. **增长价值**：随着作者影响力增长，代币价值可能上升
3. **收益分享**：通过回购机制，作者与粉丝分享创作收益

### 回购机制

1. 作者承诺将一定比例（5%-30%）的创作收入用于回购代币
2. 回购的代币将被销毁，减少流通量，可能提升剩余代币价值
3. 作者可以根据实际情况调整回购策略

### 流动性管理

1. 平台流动性池持有30%的代币，用于提供初始流动性
2. 读者激励池持有20%的代币，用于激励活跃读者
3. 平台储备持有10%的代币，用于市场调节和生态建设

## 未来发展

1. **DEX集成**：接入去中心化交易所，提供自动化流动性和交易功能
2. **质押奖励**：为长期持有者提供额外奖励
3. **治理扩展**：增强代币持有者的治理权限
4. **跨平台权益**：扩展代币权益至其他平台和服务 